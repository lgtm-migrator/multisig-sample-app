(this["webpackJsonpmultisig-sample-app"]=this["webpackJsonpmultisig-sample-app"]||[]).push([[0],{152:function(e){e.exports=JSON.parse('{"safeSingletonAddress":"0x23003449AA41D71978bF3e826e52dF2Ad9C72582","proxyFactoryAddress":"0xCd85F5f514e5fa091e40303E902bcaDF57687ebf","rifToken":"0x1fcF85925e43d70abc0D05434EE637Bd92b567D3"}')},153:function(e){e.exports=JSON.parse('{"safeSingletonAddress":"0xffd41b816f2821e579b4da85c7352bf4f17e4fa5","proxyFactoryAddress":"0x5b836117aed4ca4dee8e2e464f97f7f59b426c5a","rifToken":"0x19f64674d8a5b4e652319f5e239efd3bc969a1fe"}')},165:function(e,t,n){},174:function(e,t,n){},175:function(e,t){},191:function(e,t){},192:function(e,t){},207:function(e,t){},211:function(e,t){},221:function(e,t){},223:function(e,t){},235:function(e,t){},237:function(e,t){},264:function(e,t){},276:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(9),s=n.n(a),r=n(147),i=n.n(r),o=(n(165),n(11)),l=n(84),d=n.n(l),u=(n(174),n.p+"static/media/rif-safe.6d74aa93.svg"),j=n.p+"static/media/powered-by-iov.a0397e40.svg",b=function(e){var t=e.rLogin,n=e.setRLoginResponse,a=e.handleError;return Object(c.jsxs)("section",{className:"login",children:[Object(c.jsx)("img",{src:u,alt:"RIF Safe"}),Object(c.jsx)("h2",{children:"Login with your wallet"}),Object(c.jsx)("p",{children:Object(c.jsx)(l.RLoginButton,{onClick:function(){return t.connect().then((function(e){Promise.all([e.provider.request({method:"eth_accounts"}),e.provider.request({method:"eth_chainId"})]).then((function(t){n(e,t[0][0],parseInt(t[1]))}))})).catch(a)},children:"Connect with rLogin!"})}),Object(c.jsx)("img",{src:j,alt:"Powered by IOV Labs"}),Object(c.jsx)("p",{className:"legal",children:"Copyright \xa9 2021 IOV Labs. All rights reserved."})]})},h=n.p+"static/media/rif-safe-header.ac579ff7.svg",O=function(e){var t=e.walletAddress,n=e.chainId;return Object(c.jsx)("section",{className:"header",children:Object(c.jsxs)("ul",{className:"inline",children:[Object(c.jsx)("li",{children:Object(c.jsx)("img",{src:h,alt:"RIF Safe"})}),t&&Object(c.jsx)("li",{className:"address",children:"".concat(t.slice(0,8),"...").concat(t.slice(t.length-6))}),Object(c.jsx)("li",{className:"chainId",children:Object(c.jsx)("span",{children:n&&function(e){switch(e){case 31:return"RSK Testnet";case 30:return"RSK Mainnet";default:return"Local"}}(n)})})]})})},x=n(39),f=n(45),p=function(e){var t=e.changeActive,n=e.handleLogout,a=e.selected;return Object(c.jsxs)("ul",{className:"navigation",children:[Object(c.jsx)("li",{children:Object(c.jsx)("button",{id:"dashboard",className:"dashboard"===a?"selected":"",onClick:t,children:"Dashboard"})}),Object(c.jsx)("li",{children:Object(c.jsx)("button",{id:"transactions",className:"transactions"===a?"selected":"",onClick:t,children:"Transactions"})}),Object(c.jsx)("li",{children:Object(c.jsx)("button",{id:"assets",className:"assets"===a?"selected":"",onClick:t,children:"Assets"})}),Object(c.jsx)("li",{children:Object(c.jsx)("button",{id:"policy",className:"policy"===a?"selected":"",onClick:t,children:"Policies"})}),Object(c.jsx)("li",{className:"logout",children:Object(c.jsx)("button",{onClick:n,children:"Disconnect Wallet"})})]})},m=n(4),v=n.n(m),g=n(148),w=n(107),y=n(83),C=n(73),S=n(106);function N(e,t,n){return T.apply(this,arguments)}function T(){return(T=Object(w.a)(v.a.mark((function e(t,n,c){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.estimateGas.execTransaction(c.data.to,c.data.value,c.data.data,c.data.operation,c.data.safeTxGas,c.data.baseGas,c.data.gasPrice,c.data.gasToken,c.data.refundReceiver,c.encodedSignatures(),{from:n,gasPrice:c.data.gasPrice});case 3:return a=e.sent,e.abrupt("return",a.toNumber());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var A=function(e){var t="0x000000000000000000000000"+e.slice(2)+"000000000000000000000000000000000000000000000000000000000000000001";return new S.EthSignSignature(e,t)},k=function(){var e=Object(w.a)(v.a.mark((function e(t,n){var c,a,s,r,i,o,l,d,u,j,b,h;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.getSigner(),e.next=3,null===c||void 0===c?void 0:c.getAddress();case 3:if(a=e.sent){e.next=6;break}throw new Error("No signer provided");case 6:return s=new y.b(t.getAddress(),C,c),e.next=9,t.getTransactionHash(n);case 9:return r=e.sent,e.next=12,t.getOwnersWhoApprovedTx(r);case 12:i=e.sent,o=Object(g.a)(i);try{for(o.s();!(l=o.n()).done;)d=l.value,n.addSignature(A(d))}catch(O){o.e(O)}finally{o.f()}return e.next=17,t.getThreshold();case 17:if(!((u=e.sent)>n.signatures.size)){e.next=21;break}throw j=u-n.signatures.size,new Error("There ".concat(j>1?"are":"is"," ").concat(j," signature").concat(j>1?"s":""," missing"));case 21:return e.next=23,N(s,a.toLowerCase(),n);case 23:return b=e.sent,e.next=26,s.execTransaction(n.data.to,n.data.value,n.data.data,n.data.operation,n.data.safeTxGas,n.data.baseGas,n.data.gasPrice,n.data.gasToken,n.data.refundReceiver,n.encodedSignatures(),{gasLimit:2*b});case 26:return h=e.sent,e.abrupt("return",h);case 28:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e,t){return new Promise((function(n,c){var a=setInterval((function(){return e.getTransactionReceipt(t).then((function(e){e&&(clearInterval(a),e.status&&1===e.status?n(e):c(new Error("Transaction Failed")))})).catch((function(e){return c(e)}))}),2e3)}))},L=function(e){var t=e.handleClose,n=e.children;return Object(c.jsx)("div",{className:"modal",children:Object(c.jsxs)("div",{className:"modalBody",children:[Object(c.jsx)("div",{className:"modalHeader",children:t&&Object(c.jsx)("button",{className:"close",onClick:t,children:"x"})}),Object(c.jsx)("div",{className:"modalContent",children:n})]})})},I=function(e){var t=e.address,n=e.tx,a=t?"address/".concat(t.toLowerCase()):"tx/".concat(n);return Object(c.jsx)("a",{href:"http://explorer.testnet.rsk.co/".concat(a),target:"_blank",rel:"noreferrer",className:"icon explorerLink",children:Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(c.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(c.jsx)("path",{d:"M0 0H16V16H0z"}),Object(c.jsx)("path",{className:"icon-color",fillRule:"nonzero",d:"M13 13v-2c0-.552.448-1 1-1s1 .448 1 1v2c0 1.105-.895 2-2 2H3c-1.105 0-2-.895-2-2V3c0-1.105.895-2 2-2h2c.552 0 1 .448 1 1s-.448 1-1 1H3v10h10z"}),Object(c.jsx)("path",{className:"icon-color",d:"M11.586 3H9c-.552 0-1-.448-1-1s.448-1 1-1h5c.276 0 .526.112.707.293.181.18.293.43.293.707v5c0 .552-.448 1-1 1s-1-.448-1-1V4.414l-6.243 6.243c-.39.39-1.023.39-1.414 0-.39-.39-.39-1.024 0-1.414L11.586 3z"})]})})})},R=function(e){var t=e.hash,n=e.handleClose;return"LOADING"===t?Object(c.jsx)(L,{children:Object(c.jsx)("h2",{children:"Transaction pending..."})}):Object(c.jsxs)(L,{handleClose:n,children:[Object(c.jsx)("h2",{children:"Transaction Approved"}),Object(c.jsx)("p",{children:"Your signature has been added to this transaction! This is the hash of the transaction:"}),Object(c.jsxs)("p",{children:[Object(c.jsx)("input",{type:"text",defaultValue:t}),Object(c.jsx)(I,{tx:t})]}),Object(c.jsx)("p",{children:Object(c.jsx)("button",{onClick:n,children:"Close modal"})})]})},F=function(e){var t=e.handleClose,n=e.hash;return"LOADING"===n?Object(c.jsx)(L,{children:Object(c.jsx)("h2",{children:"Transaction pending..."})}):Object(c.jsxs)(L,{handleClose:t,children:[Object(c.jsx)("h2",{children:"Transaction executed"}),Object(c.jsx)("p",{children:"This is the hash of the transaction:"}),Object(c.jsxs)("p",{children:[Object(c.jsx)("input",{type:"text",defaultValue:n}),Object(c.jsx)(I,{tx:n})]}),Object(c.jsx)("p",{children:Object(c.jsx)("button",{onClick:t,children:"Close modal"})})]})},M=function(e){var t=e.value,n=Object(a.useRef)(null);return Object(c.jsxs)("span",{className:"copyButton",children:[Object(c.jsx)("button",{type:"button",className:"icon",onClick:function(){n.current&&n.current.select(),document.execCommand("copy")},children:Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(c.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(c.jsx)("path",{d:"M0 0H16V16H0z"}),Object(c.jsx)("path",{className:"icon-color",fillRule:"nonzero",d:"M10 10h3V3H8v1c1.105 0 2 .895 2 2v4zM6 4V3c0-1.105.895-2 2-2h5c1.105 0 2 .895 2 2v7c0 1.105-.895 2-2 2h-3v1c0 1.105-.895 2-2 2H3c-1.105 0-2-.895-2-2V6c0-1.105.895-2 2-2h3zM3 6v7h5V6H3z"})]})})}),Object(c.jsx)("input",{type:"text",className:"copyText",defaultValue:t,ref:n,style:{position:"absolute",left:"-10000px"}})]})},P=function(e){var t=e.value;return Object(c.jsxs)(c.Fragment,{children:[t,Object(c.jsx)(M,{value:t}),Object(c.jsx)(I,{address:t})]})},H=n.p+"static/media/refresh.7a8b3bf4.svg",D=n(75),V=n(108),B=n.n(V),_=function(e){var t=e.safe,n=e.transactionBundle,s=e.walletAddress,r=e.handleError,i=e.approveTransactionHash,l=e.executeTransaction,d=n.transaction,u=n.hash,j=Object(a.useState)(!1),b=Object(o.a)(j,2),h=b[0],O=b[1],x=Object(a.useState)([]),f=Object(o.a)(x,2),p=f[0],m=f[1],v=Object(a.useState)(0),g=Object(o.a)(v,2),w=g[0],y=g[1],S=Object(a.useState)(!1),N=Object(o.a)(S,2),T=N[0],A=N[1],k=Object(a.useState)(null),E=Object(o.a)(k,2),L=E[0],R=E[1];Object(a.useEffect)((function(){t.getTransactionHash(d).then((function(e){F(e);var t=new B.a(C).decodeData(d.data.data);t.method?R(t):R(new B.a(D).decodeData(d.data.data))})),t.getThreshold().then((function(e){return y(e)}))}),[d]);var F=function(e){A(!0),t.getOwnersWhoApprovedTx(e).then((function(e){return m(e)})).catch(r).finally((function(){return A(!1)}))},M=1===p.filter((function(e){return e.toLowerCase()===s.toLowerCase()})).length,V=w>p.length;return Object(c.jsxs)("div",{className:"transaction",children:[Object(c.jsxs)("div",{className:"summary",children:[Object(c.jsx)("p",{children:Object(c.jsx)("strong",{children:L&&("0x"===d.data.data?"Send Value":L.method?L.method:"unknown")})}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"to: "}),d.data.to===t.getAddress()&&Object(c.jsx)("em",{children:"(Safe) "}),Object(c.jsx)(P,{value:d.data.to})]}),"0"!==d.data.value&&Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"value: "}),d.data.value]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"approvals: "}),T?"loading...":"".concat(p.length," out of ").concat(w),Object(c.jsx)("button",{className:"icon",onClick:function(){return F(u)},children:Object(c.jsx)("img",{src:H,alt:"refresh"})})]})]}),Object(c.jsxs)("div",{className:"buttons",children:[Object(c.jsxs)("button",{onClick:function(){return O(!h)},children:[h?"hide ":"show ","details"]}),i&&Object(c.jsx)("button",{disabled:M,onClick:function(){return i&&i(d).then((function(){return F(u)}))},children:"approve"}),l&&Object(c.jsx)("button",{disabled:V,onClick:function(){return l(n)},children:"execute"})]}),h&&Object(c.jsx)("table",{children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Transaction Hash"}),Object(c.jsx)("td",{children:Object(c.jsxs)("p",{children:[u,Object(c.jsx)(I,{tx:u})]})})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Nonce"}),Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:d.data.nonce})})]}),"0x"!==d.data.data&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Raw Data"}),Object(c.jsx)("td",{children:Object(c.jsx)("p",{className:"data",children:d.data.data})})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Decoded Data"}),Object(c.jsx)("td",{children:Object(c.jsx)("pre",{children:JSON.stringify(L,null,2)})})]})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Approvals:"}),Object(c.jsx)("td",{children:0===p.length?Object(c.jsx)("p",{children:Object(c.jsx)("em",{children:"No signatures"})}):Object(c.jsx)("ol",{children:p.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsx)(P,{value:e}),s.toLowerCase()===e.toLowerCase()&&Object(c.jsx)("em",{children:"(Connected Account)"})]},e)}))})})]})]})})]})},z=function(e){var t=e.safe,n=e.handleError,s=e.updateTransactionStatus,r=e.walletAddress,i=e.transactions,l=Object(a.useState)(null),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(null),h=Object(o.a)(b,2),O=h[0],x=h[1],f=[],p=[];i.map((function(e){return"PENDING"===e.status?f.push(e):p.push(e)}));var m=function(e){return j("LOADING"),t.getTransactionHash(e).then((function(e){return t.approveTransactionHash(e).then((function(e){return E(t.getProvider(),e.hash)})).then((function(e){return j(e.transactionHash)}))})).catch((function(e){j(null),n(e)}))},v=function(e){x("LOADING"),k(t,e.transaction).then((function(e){return E(t.getProvider(),e.hash)})).then((function(t){x(t.transactionHash),s(e)})).catch((function(e){x(null),n(e)}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("section",{className:"panel",children:[Object(c.jsx)("h2",{children:"Transactions"}),0===f.length&&0===p.length&&Object(c.jsx)("p",{children:Object(c.jsx)("em",{children:"There are no transactions."})}),0!==f.length&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h3",{children:"Pending Transactions"}),f.map((function(e,a){return Object(c.jsx)(_,{safe:t,transactionBundle:e,handleError:n,approveTransactionHash:m,executeTransaction:v,walletAddress:r},a)}))]}),0!==p.length&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h3",{children:"Executed Transactions"}),p.map((function(e,n){return Object(c.jsx)(_,{safe:t,transactionBundle:e,walletAddress:r},n)}))]})]}),u&&Object(c.jsx)(R,{hash:u,handleClose:function(){return j(null)}}),O&&Object(c.jsx)(F,{hash:O,handleClose:function(){return x(null)}})]})},G=function(e){var t=e.safe,n=Object(a.useState)(0),s=Object(o.a)(n,2),r=s[0],i=s[1];Object(a.useEffect)((function(){l()}),[t]);var l=function(){return t.getBalance().then((function(e){return i(e)}))};return Object(c.jsxs)("section",{className:"panel",children:[Object(c.jsx)("h2",{children:"Safe Dashboard"}),Object(c.jsx)("table",{children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Safe Address"}),Object(c.jsx)("td",{children:Object(c.jsx)(P,{value:t.getAddress()})})]}),Object(c.jsxs)("tr",{className:"text",children:[Object(c.jsx)("th",{children:"Balance"}),Object(c.jsxs)("td",{children:[(r/1e18).toString(),Object(c.jsx)("button",{onClick:l,className:"icon",children:Object(c.jsx)("img",{src:H,alt:"Refresh"})})]})]})]})})]})},J=function(e){for(var t=e.value,n=e.onChange,a=e.numberOfOwners,s=[],r=1;r<=a;r++)s.push(r);return Object(c.jsx)("select",{value:t,onChange:function(e){return n(parseInt(e.target.value))},children:s.map((function(e){return Object(c.jsx)("option",{value:e,children:e},e)}))})},W=function(e){for(var t=e.numberOfOwners,n=e.currentThreshold,s=e.handleSubmit,r=Object(a.useState)(n),i=Object(o.a)(r,2),l=i[0],d=i[1],u=[],j=1;j<=t;j++)u.push(j);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Change threshold"}),Object(c.jsx)("p",{children:"Change the number of approvers for a transaction to be executed"}),Object(c.jsx)("label",{children:"New threshold:"}),Object(c.jsx)(J,{numberOfOwners:t,value:l,onChange:function(e){return d(e)}}),Object(c.jsx)("p",{children:Object(c.jsx)("button",{onClick:function(){return s(l)},children:"Change threshold"})})]})},Y=n(12),q=function(e){var t=e.handleSubmit,n=e.handleError,s=e.numberOfOwners,r=Object(a.useState)(""),i=Object(o.a)(r,2),l=i[0],d=i[1],u=Object(a.useState)(s),j=Object(o.a)(u,2),b=j[0],h=j[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Add new owner"}),Object(c.jsx)("label",{children:"Address"}),Object(c.jsx)("input",{type:"text",className:"newOwner",value:l,onChange:function(e){return d(e.target.value)}}),Object(c.jsx)("label",{children:"New Threshold"}),Object(c.jsx)(J,{numberOfOwners:s+1,value:b,onChange:function(e){return h(e)}}),Object(c.jsx)("p",{children:Object(c.jsx)("button",{onClick:function(){Object(Y.e)(l.toLowerCase())?t(l.toLowerCase(),b):n(new Error("Value is not an address."))},children:"Update"})})]})},K=function(e){var t=e.numberOfOwners,n=e.handleSubmit,s=e.removeAddress,r=Object(a.useState)(t-1),i=Object(o.a)(r,2),l=i[0],d=i[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Remove owner"}),Object(c.jsx)("p",{children:"Are you sure you want to remove this owner?"}),Object(c.jsx)("input",{type:"text",defaultValue:s}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:"New threshold:"}),Object(c.jsx)(J,{numberOfOwners:t-1,value:l,onChange:function(e){return d(e)}})]}),Object(c.jsx)("p",{children:Object(c.jsx)("button",{onClick:function(){return n(s.toLowerCase(),l)},children:"Remove"})})]})},U=function(e){var t=e.oldAddress,n=e.handleError,s=e.handleSubmit,r=Object(a.useState)(""),i=Object(o.a)(r,2),l=i[0],d=i[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Swap Owner"}),Object(c.jsx)("p",{children:"Swap address for a new one."}),Object(c.jsx)("label",{children:"Old Address:"}),Object(c.jsx)("input",{type:"text",defaultValue:t}),Object(c.jsx)("label",{children:"New Owner"}),Object(c.jsx)("input",{type:"text",className:"newAddress",value:l,onChange:function(e){return d(e.target.value)}}),Object(c.jsx)("p",{children:Object(c.jsx)("button",{onClick:function(){return Object(Y.e)(l)?s(t,l.toLowerCase()):n(new Error("Address is not valid"))},children:"Swap Address"})})]})},X=n.p+"static/media/delete.8970c03e.svg",Q=n.p+"static/media/swap.29d1f400.svg",Z=n.p+"static/media/edit.d3af4af9.svg",$=function(e){var t=e.safe,n=e.addTransaction,s=e.handleError,r=Object(a.useState)([]),i=Object(o.a)(r,2),l=i[0],d=i[1],u=Object(a.useState)(0),j=Object(o.a)(u,2),b=j[0],h=j[1],O=Object(a.useState)(!1),x=Object(o.a)(O,2),f=x[0],p=x[1],m=Object(a.useState)(!1),v=Object(o.a)(m,2),g=v[0],w=v[1],y=Object(a.useState)(null),C=Object(o.a)(y,2),S=C[0],N=C[1],T=Object(a.useState)(null),A=Object(o.a)(T,2),k=A[0],E=A[1];Object(a.useEffect)((function(){t.getOwners().then((function(e){return d(e)})),t.getThreshold().then((function(e){return h(e)}))}),[t]);var I=function(){p(!1),w(!1),N(null),E(null)};return Object(c.jsxs)("section",{className:"section panel",children:[Object(c.jsx)("h2",{children:"Safe Policy"}),Object(c.jsx)("table",{children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Owners"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("ul",{children:l.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsx)(P,{value:e}),Object(c.jsx)("button",{className:"icon delete",onClick:function(){return N(e)},children:Object(c.jsx)("img",{src:X,alt:"delete address"})}),Object(c.jsx)("button",{className:"icon",onClick:function(){return E(e)},children:Object(c.jsx)("img",{src:Q,alt:"swap address"})})]},e)}))}),Object(c.jsx)("button",{onClick:function(){return p(!0)},children:"+ Add Owner"})]})]}),Object(c.jsxs)("tr",{className:"text",children:[Object(c.jsx)("th",{children:"Threshold"}),Object(c.jsxs)("td",{children:[b,Object(c.jsx)("button",{className:"icon",onClick:function(){return w(!0)},children:Object(c.jsx)("img",{src:Z,alt:"edit threshold"})})]})]})]})}),g&&Object(c.jsx)(L,{handleClose:function(){return w(!1)},children:Object(c.jsx)(W,{numberOfOwners:l.length,currentThreshold:b,handleSubmit:function(e){return t.getChangeThresholdTx(e).then((function(e){n(e),I()})).catch(s)}})}),f&&Object(c.jsx)(L,{handleClose:function(){return p(!1)},children:Object(c.jsx)(q,{numberOfOwners:l.length,handleSubmit:function(e,c){return t.getAddOwnerTx(e,c).then((function(e){n(e),I()})).catch(s)},handleError:s})}),S&&Object(c.jsx)(L,{handleClose:function(){return N(null)},children:Object(c.jsx)(K,{removeAddress:S,numberOfOwners:l.length,handleSubmit:function(e,c){return t.getRemoveOwnerTx(e,c).then((function(e){n(e),I()})).catch(s)}})}),k&&Object(c.jsx)(L,{handleClose:function(){return E(null)},children:Object(c.jsx)(U,{oldAddress:k,handleSubmit:function(e,c){return t.getSwapOwnerTx(e,c).then((function(e){n(e),I()})).catch(s)},handleError:s})})]})},ee=n(151),te=n(20),ne=function(e){var t=e.createTransaction,n=e.handleError,s=Object(a.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],d=Object(a.useState)(1e4),u=Object(o.a)(d,2),j=u[0],b=u[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h3",{children:"Create Transaction"}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:"Recepient:"}),Object(c.jsx)("input",{type:"text",className:"to",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:"Amount:"}),Object(c.jsx)("input",{type:"number",className:"amount",value:j,onChange:function(e){return b(parseInt(e.target.value))}})]}),Object(c.jsx)("button",{className:"submit",onClick:function(){if(!Object(Y.e)(i))return n(new Error("Recipient is not an address."));t(i.toLowerCase(),j)},children:"Create Transaction"})]})},ce=function(e){var t=e.token,n=e.createTransaction,s=e.handleError,r=Object(a.useState)({amount:0,address:""}),i=Object(o.a)(r,2),l=i[0],d=i[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)("h2",{children:["Transfer ERC20 Token: ",t.symbol]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:"You have:"}),Object(c.jsx)("input",{type:"text",className:"readonly",defaultValue:t.amount})]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:"Amount to sent:"}),Object(c.jsx)("input",{type:"number",className:"amount",value:l.amount,onChange:function(e){return d(Object(x.a)(Object(x.a)({},l),{},{amount:parseInt(e.target.value)}))}})]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{children:"Recipient"}),Object(c.jsx)("input",{type:"string",className:"recipient",value:l.address,onChange:function(e){return d(Object(x.a)(Object(x.a)({},l),{},{address:e.target.value}))}})]}),Object(c.jsx)("p",{children:Object(c.jsx)("button",{className:"submit",onClick:function(){return Object(Y.e)(l.address)?l.amount>t.amount||l.amount<1?s(new Error("Amount should be between 1 and ".concat(t.amount,"."))):n(t,l.amount,l.address.toLowerCase()):s(new Error("Recipient is not an address."))},children:"Create Transaction"})})]})},ae=n(152),se=n(153),re=function(e){switch(e){case 31:return se;default:return ae}},ie=function(e){var t=e.safe,n=e.addTransaction,s=e.handleError,r=Object(a.useState)(!1),i=Object(o.a)(r,2),l=i[0],d=i[1],u=Object(a.useState)(null),j=Object(o.a)(u,2),b=j[0],h=j[1],O=Object(a.useState)("0"),p=Object(o.a)(O,2),m=p[0],v=p[1],g=Object(a.useState)([]),w=Object(o.a)(g,2),C=w[0],S=w[1];Object(a.useEffect)((function(){N(),t.getChainId().then((function(e){return T({symbol:"tRIF",decimals:18,amount:0,contractAddress:re(e).rifToken})}))}),[t]);var N=function(){return t.getBalance().then((function(e){return v(e.toString())}))},T=function(e){var n=t.getSigner();new y.b(e.contractAddress,D,n).balanceOf(t.getAddress()).then((function(e){return e.toString()})).then((function(t){var n=Object(x.a)(Object(x.a)({},e),{},{amount:parseInt(t)/Math.pow(10,18)}),c=C.find((function(t){return t.symbol===e.symbol}))?C.map((function(t){return t.symbol===e.symbol?n:t})):[].concat(Object(f.a)(C),[n]);S(c)})).catch((function(e){return console.log("error",e)}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"panel",children:[Object(c.jsx)("h2",{children:"Assets"}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Asset"}),Object(c.jsx)("th",{children:"Amount"})]})}),Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:"rBTC"})}),Object(c.jsx)("td",{children:Object(c.jsxs)("p",{children:[(parseInt(m)/1e18).toString(),Object(c.jsx)("button",{className:"icon",onClick:N,children:Object(c.jsx)("img",{src:H,alt:"refresh balance"})}),Object(c.jsx)("button",{className:"icon",onClick:function(){return d(!0)},children:"transfer"})]})})]}),C.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:e.symbol})}),Object(c.jsxs)("td",{children:[e.amount,Object(c.jsx)("button",{className:"icon",onClick:function(){return T(e)},children:Object(c.jsx)("img",{src:H,alt:"refresh balance"})}),Object(c.jsx)("button",{className:"icon",onClick:function(){return h(e)},children:"transfer"})]})]},e.contractAddress)}))]})]})]}),l&&Object(c.jsx)(L,{handleClose:function(){return d(!1)},children:Object(c.jsx)(ne,{createTransaction:function(e,c){return t.createTransaction({to:e,value:c.toString(),data:"0x"}).then((function(e){return n(e)})).catch(s).finally((function(){return d(!1)}))},handleError:s})}),b&&Object(c.jsx)(L,{handleClose:function(){return h(null)},children:Object(c.jsx)(ce,{token:b,handleError:s,createTransaction:function(e,c,a){var r=new y.b(e.contractAddress,D,t.getSigner()),i=new ee.ERC20TransactionBuilder(t,r),o=te.a.from(c).mul(te.a.from(10).pow(e.decimals));i.transfer(a,o).then((function(e){return n(e)})).catch(s).finally((function(){return h(null)}))}})})]})},oe=function(e){var t=e.closeModal,n=e.changeScreen;return Object(c.jsxs)(L,{handleClose:t,children:[Object(c.jsx)("h2",{children:"Transaction Created"}),Object(c.jsx)("p",{children:"A transaction has been created and added to the transaction panel. You can sign the transaction there, and when enough signatures are collected, execute it."}),Object(c.jsx)("p",{children:Object(c.jsx)("button",{onClick:n,children:"View Transactions"})})]})},le=function(e){var t=e.safe,n=e.walletAddress,s=e.handleError,r=e.handleLogout,i=Object(a.useState)("dashboard"),l=Object(o.a)(i,2),d=l[0],u=l[1],j=Object(a.useState)(!1),b=Object(o.a)(j,2),h=b[0],O=b[1],m=Object(a.useState)([]),v=Object(o.a)(m,2),g=v[0],w=v[1],y=function(e){t.getTransactionHash(e).then((function(t){w([].concat(Object(f.a)(g),[{status:"PENDING",transaction:e,hash:t}])),O(!0)}))};return Object(c.jsxs)("section",{className:"selectedSafe",children:[Object(c.jsx)(p,{handleLogout:r,changeActive:function(e){return u(e.currentTarget.id)},selected:d}),"dashboard"===d&&Object(c.jsx)(G,{safe:t}),"transactions"===d&&Object(c.jsx)(z,{safe:t,transactions:g,handleError:s,updateTransactionStatus:function(e){var t=g.map((function(t){return t.hash===e.hash?Object(x.a)(Object(x.a)({},t),{},{status:"EXECUTED"}):t}));w(t)},walletAddress:n}),"assets"===d&&Object(c.jsx)(ie,{safe:t,handleError:s,addTransaction:y}),"policy"===d&&Object(c.jsx)($,{safe:t,addTransaction:y,handleError:s}),h&&Object(c.jsx)(oe,{closeModal:function(){return O(!1)},changeScreen:function(){O(!1),u("transactions")}})]})},de=n(154),ue=n.n(de),je=n(156),be=n(47),he=function(e){var t=e.connectAddress,n=e.createSafe,s=e.handleError,r=Object(a.useState)([t?t.toLowerCase():""]),i=Object(o.a)(r,2),l=i[0],d=i[1],u=Object(a.useState)(1),j=Object(o.a)(u,2),b=j[0],h=j[1],O=function(e){var t=parseInt(e.target.id.replace("address","")),n=l.map((function(n,c){return c===t?e.target.value.toLowerCase():n}));d(n)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{children:"Create a new safe"}),Object(c.jsxs)("p",{children:["A safe can have any number of owners associated with it. Your connected address has been added as the first account.",Object(c.jsx)("br",{}),"Click the ",Object(c.jsx)("em",{children:"Add address"})," button to add additional addresses, and the ",Object(c.jsx)("em",{children:"delete button"})," to remove addresses."]}),Object(c.jsx)("ul",{children:l.map((function(e,t){return Object(c.jsxs)("li",{children:[Object(c.jsxs)("label",{children:["Address ",t+1,": "]}),Object(c.jsx)("input",{type:"text",id:"address".concat(t),value:e,onChange:O,className:"address".concat(t)}),Object(c.jsx)("button",{className:"removeAddress".concat(t),onClick:function(){return function(e){var t=l.filter((function(t,n){return n!==e}));d(t)}(t)},children:"delete"})]},t)}))}),Object(c.jsx)("button",{className:"addAddress",onClick:function(){return d([].concat(Object(f.a)(l),[""]))},children:"Add address"}),Object(c.jsxs)("p",{children:["Transactions require the confirmation of at least"," ",Object(c.jsx)("select",{className:"threshold",value:b.toString(),onChange:function(e){return h(parseInt(e.target.value))},children:function(e){for(var t=[],n=0;n<e;n++)t.push(Object(c.jsx)("option",{value:n+1,children:n+1},n));return t}(l.length)}),"signatures."]}),Object(c.jsx)("button",{className:"submit",disabled:0===l.length,onClick:function(){var e=[];if(l.forEach((function(t,n){Object(Y.e)(t)||e.push(n+1)})),0!==e.length)return s(new Error("Incorrect Addresses for: ".concat(e.toString()))),!1;n(l,b)},children:"Create Safe"})]})},Oe=function(e){var t=e.connectToSafe,n=Object(a.useState)(""),s=Object(o.a)(n,2),r=s[0],i=s[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Connect to an existing safe"}),Object(c.jsx)("label",{children:"Safe address"}),Object(c.jsx)("input",{className:"safeAddress",type:"text",value:r,onChange:function(e){return i(e.target.value)}}),Object(c.jsx)("button",{className:"connect",onClick:function(){return t(r)},children:"Connect"})]})},xe=function(e){var t=e.web3Provider,n=e.chainId,s=e.handleSetSafe,r=e.handleError,i=e.address,l=Object(a.useState)(!1),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(!1),h=Object(o.a)(b,2),O=h[0],x=h[1];return O?Object(c.jsx)("div",{style:{textAlign:"center"},children:"Loading..."}):Object(c.jsxs)("section",{className:"connect panel",children:[Object(c.jsxs)("h2",{children:["Create a safe, or connect to an existing one",Object(c.jsx)("button",{onClick:function(){return j(!u)},children:u?"Connect to Safe":"Create Safe"})]}),u?Object(c.jsx)(he,{createSafe:function(e,c){x(!0);var a=re(n),i=new be.ethers.providers.Web3Provider(t).getSigner();new je.EthersSafeFactory(i,a.proxyFactoryAddress.toLowerCase(),a.safeSingletonAddress.toLowerCase()).createSafe({owners:e,threshold:c}).then(s).catch(r).finally((function(){return x(!1)}))},handleError:r,connectAddress:i}):Object(c.jsx)(Oe,{connectToSafe:function(e){x(!0);var n=new be.ethers.providers.Web3Provider(t).getSigner();ue.a.create(be.ethers,e.toLowerCase(),n).then((function(e){return s(e)})).catch(r).finally((function(){return x(!1)}))}})]})},fe=new d.a({cacheProvider:!1,supportedChains:[31,1337]});var pe=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(null),i=Object(o.a)(r,2),l=i[0],d=i[1],u=Object(a.useState)(null),j=Object(o.a)(u,2),h=j[0],x=j[1],f=Object(a.useState)(null),p=Object(o.a)(f,2),m=p[0],v=p[1],g=Object(a.useState)(null),w=Object(o.a)(g,2),y=w[0],C=w[1],S=function(e){return e&&s(e.message)},N=function(){return s(null)};return Object(c.jsxs)("div",{className:l?"App":"App signin",children:[l?Object(c.jsx)(O,{chainId:y,walletAddress:m}):Object(c.jsx)(b,{rLogin:fe,setRLoginResponse:function(e,t,n){d(e),v(t),C(n),e.provider.on("accountsChanged",(function(e){return v(e[0])}))},handleError:S}),n&&Object(c.jsxs)("section",{className:"error",children:[Object(c.jsx)("p",{children:n}),Object(c.jsx)("button",{onClick:N,children:"x"})]}),l&&y&&!h&&Object(c.jsx)(xe,{web3Provider:l.provider,chainId:y,handleSetSafe:function(e){x(e),N()},handleError:S,address:m}),l&&m&&h&&Object(c.jsx)(le,{safe:h,walletAddress:m,handleLogout:function(){null===l||void 0===l||l.disconnect(),d(null),x(null),s(null),v(null),C(null)},handleError:S})]})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,279)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(pe,{})}),document.getElementById("root")),me()},75:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')}},[[276,1,2]]]);
//# sourceMappingURL=main.44358d58.chunk.js.map