(this["webpackJsonpmultisig-sample-app"]=this["webpackJsonpmultisig-sample-app"]||[]).push([[0],{151:function(e){e.exports=JSON.parse('{"safeSingletonAddress":"0x23003449AA41D71978bF3e826e52dF2Ad9C72582","proxyFactoryAddress":"0xCd85F5f514e5fa091e40303E902bcaDF57687ebf","rifToken":"0x1fcF85925e43d70abc0D05434EE637Bd92b567D3"}')},152:function(e){e.exports=JSON.parse('{"safeSingletonAddress":"0xffd41b816f2821e579b4da85c7352bf4f17e4fa5","proxyFactoryAddress":"0x5b836117aed4ca4dee8e2e464f97f7f59b426c5a","rifToken":"0x19f64674d8a5b4e652319f5e239efd3bc969a1fe"}')},162:function(e,t,n){},171:function(e,t,n){},173:function(e,t){},193:function(e,t){},198:function(e,t){},202:function(e,t){},203:function(e,t){},222:function(e,t){},224:function(e,t){},235:function(e,t){},237:function(e,t){},260:function(e,t){},274:function(e,t,n){"use strict";n.r(t);var c,a=n(0),s=n(9),r=n.n(s),i=n(147),o=n.n(i),l=(n(162),n(10)),d=n(83),j=n.n(d),u=(n(171),n.p+"static/media/rif-safe.6d74aa93.svg"),b=n.p+"static/media/powered-by-iov.a0397e40.svg",h=function(e){var t=e.rLogin,n=e.setRLoginResponse,c=e.handleError;return Object(a.jsxs)("section",{className:"login",children:[Object(a.jsx)("img",{src:u,alt:"RIF Safe"}),Object(a.jsx)("h2",{children:"Login with your wallet"}),Object(a.jsx)("p",{children:Object(a.jsx)(d.RLoginButton,{onClick:function(){return t.connect().then((function(e){Promise.all([e.provider.request({method:"eth_accounts"}),e.provider.request({method:"eth_chainId"})]).then((function(t){n(e,t[0][0],parseInt(t[1]))}))})).catch(c)},children:"Connect with rLogin!"})}),Object(a.jsx)("img",{src:b,alt:"Powered by IOV Labs"}),Object(a.jsx)("p",{className:"legal",children:"Copyright \xa9 2021 IOV Labs. All rights reserved."})]})},O=n.p+"static/media/rif-safe-header.ac579ff7.svg",x=function(e){var t=e.walletAddress,n=e.chainId;return Object(a.jsx)("section",{className:"header",children:Object(a.jsxs)("ul",{className:"inline",children:[Object(a.jsx)("li",{children:Object(a.jsx)("img",{src:O,alt:"RIF Safe"})}),t&&Object(a.jsx)("li",{className:"address",children:"".concat(t.slice(0,8),"...").concat(t.slice(t.length-6))}),Object(a.jsx)("li",{className:"chainId",children:Object(a.jsx)("span",{children:n&&function(e){switch(e){case 31:return"RSK Testnet";case 30:return"RSK Mainnet";default:return"Local"}}(n)})})]})})},f=n(45),p=n(21),m=n(84),v=n.n(m),g=function(e){var t=e.changeActive,n=e.handleLogout,c=e.selected;return Object(a.jsxs)("ul",{className:"navigation",children:[Object(a.jsx)("li",{children:Object(a.jsx)("button",{id:"dashboard",className:"dashboard"===c?"selected":"",onClick:t,children:"Dashboard"})}),Object(a.jsx)("li",{children:Object(a.jsx)("button",{id:"transactions",className:"transactions"===c?"selected":"",onClick:t,children:"Transactions"})}),Object(a.jsx)("li",{children:Object(a.jsx)("button",{id:"assets",className:"assets"===c?"selected":"",onClick:t,children:"Assets"})}),Object(a.jsx)("li",{children:Object(a.jsx)("button",{id:"policy",className:"policy"===c?"selected":"",onClick:t,children:"Policies"})}),Object(a.jsx)("li",{className:"logout",children:Object(a.jsx)("button",{onClick:n,children:"Disconnect Wallet"})})]})},w=n(86);!function(e){e.PENDING="Pending",e.EXECUTED="Executed",e.REJECTED="Rejected"}(c||(c={}));var C=function(e,t){return new Promise((function(n,c){var a=setInterval((function(){return e.getTransactionReceipt(t).then((function(e){e&&(clearInterval(a),e.status&&1===e.status?n(e):c(new Error("Transaction Failed")))})).catch((function(e){return c(e)}))}),2e3)}))},y=n.p+"static/media/loading.06d7c63f.svg",S=function(e){var t=e.address,n=e.tx,c=t?"address/".concat(t.toLowerCase()):"tx/".concat(n);return Object(a.jsx)("a",{href:"http://explorer.testnet.rsk.co/".concat(c),target:"_blank",rel:"noreferrer",className:"icon explorerLink",children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(a.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(a.jsx)("path",{d:"M0 0H16V16H0z"}),Object(a.jsx)("path",{className:"icon-color",fillRule:"nonzero",d:"M13 13v-2c0-.552.448-1 1-1s1 .448 1 1v2c0 1.105-.895 2-2 2H3c-1.105 0-2-.895-2-2V3c0-1.105.895-2 2-2h2c.552 0 1 .448 1 1s-.448 1-1 1H3v10h10z"}),Object(a.jsx)("path",{className:"icon-color",d:"M11.586 3H9c-.552 0-1-.448-1-1s.448-1 1-1h5c.276 0 .526.112.707.293.181.18.293.43.293.707v5c0 .552-.448 1-1 1s-1-.448-1-1V4.414l-6.243 6.243c-.39.39-1.023.39-1.414 0-.39-.39-.39-1.024 0-1.414L11.586 3z"})]})})})},N=function(e){var t=e.text,n=e.hash;return Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("p",{children:Object(a.jsx)("img",{src:y,alt:"Loading..."})}),(t||n)&&Object(a.jsxs)("p",{children:[t,n&&Object(a.jsxs)(a.Fragment,{children:[" View it on the explorer ",Object(a.jsx)(S,{tx:n})]})]})]})},T=function(e){var t=e.handleClose,n=e.children;return Object(a.jsx)("div",{className:"modal",children:Object(a.jsxs)("div",{className:"modalBody",children:[Object(a.jsx)("div",{className:"modalHeader",children:t&&Object(a.jsx)("button",{className:"close",onClick:t,children:"x"})}),Object(a.jsx)("div",{className:"modalContent",children:n})]})})},E=function(e){var t=e.hash,n=e.handleClose;return"LOADING"===t?Object(a.jsx)(T,{children:Object(a.jsx)(N,{text:"Adding the signature to the transaction."})}):Object(a.jsxs)(T,{handleClose:n,children:[Object(a.jsx)("h2",{children:"Transaction Approved"}),Object(a.jsx)("p",{children:"Your signature has been added to this transaction! This is the hash of the transaction:"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"readonly",children:t}),Object(a.jsx)(S,{tx:t})]}),Object(a.jsx)("p",{children:Object(a.jsx)("button",{onClick:n,children:"Close modal"})})]})},A=function(e){var t=e.handleClose,n=e.status;return"LOADING"===n.status?Object(a.jsx)(T,{children:Object(a.jsx)(N,{text:"Executing the transaction.",hash:n.hash})}):Object(a.jsxs)(T,{handleClose:t,children:[Object(a.jsx)("h2",{children:"Transaction executed"}),Object(a.jsx)("p",{children:"This is the hash of the transaction:"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"readonly",children:n.hash}),Object(a.jsx)(S,{tx:n.hash})]}),Object(a.jsx)("p",{children:Object(a.jsx)("button",{onClick:t,children:"Close modal"})})]})},k=function(e){var t=e.value,n=Object(s.useRef)(null);return Object(a.jsxs)("span",{className:"copyButton",children:[Object(a.jsx)("button",{type:"button",className:"icon",onClick:function(){n.current&&n.current.select(),document.execCommand("copy")},children:Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(a.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(a.jsx)("path",{d:"M0 0H16V16H0z"}),Object(a.jsx)("path",{className:"icon-color",fillRule:"nonzero",d:"M10 10h3V3H8v1c1.105 0 2 .895 2 2v4zM6 4V3c0-1.105.895-2 2-2h5c1.105 0 2 .895 2 2v7c0 1.105-.895 2-2 2h-3v1c0 1.105-.895 2-2 2H3c-1.105 0-2-.895-2-2V6c0-1.105.895-2 2-2h3zM3 6v7h5V6H3z"})]})})}),Object(a.jsx)("input",{type:"text",className:"copyText",defaultValue:t,ref:n,style:{position:"absolute",left:"-10000px"}})]})},L=function(e){var t=e.value;return Object(a.jsxs)(a.Fragment,{children:[t,Object(a.jsx)(k,{value:t}),Object(a.jsx)(S,{address:t})]})},I=n.p+"static/media/refresh.7a8b3bf4.svg",R=n(107),D=n(73),F=n(109),P=n.n(F),M=function(e){var t=e.safe,n=e.transactionBundle,c=e.walletAddress,r=e.handleError,i=e.approveTransactionHash,o=e.executeTransaction,d=e.rejectTransaction,j=n.transaction,u=n.hash,b=Object(s.useState)(!1),h=Object(l.a)(b,2),O=h[0],x=h[1],f=Object(s.useState)([]),p=Object(l.a)(f,2),m=p[0],v=p[1],g=Object(s.useState)(0),w=Object(l.a)(g,2),C=w[0],y=w[1],S=Object(s.useState)(!1),N=Object(l.a)(S,2),T=N[0],E=N[1],A=Object(s.useState)(null),F=Object(l.a)(A,2),M=F[0],H=F[1];Object(s.useEffect)((function(){t.getTransactionHash(j).then((function(e){B(e);var t=new P.a(R).decodeData(j.data.data);t.method?H(t):H(new P.a(D).decodeData(j.data.data))})),t.getThreshold().then((function(e){return y(e)}))}),[j]);var B=function(e){E(!0),t.getOwnersWhoApprovedTx(e).then((function(e){return v(e)})).catch(r).finally((function(){return E(!1)}))},V=1===m.filter((function(e){return e.toLowerCase()===c.toLowerCase()})).length,_=C>m.length;return Object(a.jsxs)("div",{className:"transaction",children:[Object(a.jsxs)("div",{className:"summary",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:M&&(n.isReject?"Rejection Transaction":"0x"===j.data.data?"Send Value":M.method?M.method:"Transaction")})}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"to: "}),j.data.to===t.getAddress()&&Object(a.jsx)("em",{children:"(Safe) "}),Object(a.jsx)(L,{value:j.data.to})]}),"0"!==j.data.value&&Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"value: "}),j.data.value]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"approvals: "}),T?"loading...":"".concat(m.length," out of ").concat(C),Object(a.jsx)("button",{className:"icon",onClick:function(){return B(u)},children:Object(a.jsx)("img",{src:I,alt:"refresh"})})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"nonce:"})," ",j.data.nonce]}),Object(a.jsxs)("button",{onClick:function(){return x(!O)},children:[O?"hide ":"show ","details"]})]}),Object(a.jsxs)("div",{className:"buttons",children:[i&&Object(a.jsx)("button",{disabled:V,onClick:function(){return i&&i(j).then((function(){return B(u)}))},children:"approve"}),!n.isReject&&d&&Object(a.jsx)("button",{onClick:function(){return d&&d(j)},children:"create rejection"}),o&&Object(a.jsx)("button",{disabled:_,onClick:function(){return o(n)},children:"execute"})]}),O&&Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Transaction Hash"}),Object(a.jsx)("td",{children:Object(a.jsxs)("p",{children:[u,Object(a.jsx)(k,{value:u})]})})]}),"0x"!==j.data.data&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Raw Data"}),Object(a.jsx)("td",{children:Object(a.jsx)("p",{className:"data",children:j.data.data})})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Decoded Data"}),Object(a.jsx)("td",{children:Object(a.jsx)("pre",{children:JSON.stringify(M,null,2)})})]})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Approvals:"}),Object(a.jsx)("td",{children:0===m.length?Object(a.jsx)("p",{children:Object(a.jsx)("em",{children:"No signatures"})}):Object(a.jsx)("ol",{children:m.map((function(e){return Object(a.jsxs)("li",{children:[Object(a.jsx)(L,{value:e}),c.toLowerCase()===e.toLowerCase()&&Object(a.jsx)("em",{children:"(Connected Account)"})]},e)}))})})]})]})})]})},H=function(e){var t=e.handleClick,n=e.selected,s=function(e){var c=e.name;return Object(a.jsx)("li",{children:Object(a.jsx)("button",{onClick:function(){return t(c)},className:n===c?"selected":"",children:c})})};return Object(a.jsxs)("ul",{className:"inline",children:[Object(a.jsx)(s,{name:c.PENDING}),Object(a.jsx)(s,{name:c.EXECUTED}),Object(a.jsx)(s,{name:c.REJECTED})]})},B=function(e){var t=e.count,n=e.screen;if(0===t)return Object(a.jsx)("p",{children:Object(a.jsxs)("em",{children:["No ",n.toString()," transactions"]})});switch(n){case c.PENDING:return Object(a.jsx)("p",{children:"Transactions must be executed in nonce order. Please execute the first transaction before interacting with the next. If you do not want to execute the next transaction, create and execute a rejection transaction which will move to the next nonce."});case c.REJECTED:return Object(a.jsx)("p",{children:'These transactions have a corresponding "Executed" transaction with the same nonce.'})}return Object(a.jsx)(a.Fragment,{})},V=function(e){var t=e.safe,n=e.handleError,r=e.updateTransactionStatus,i=e.addTransaction,o=e.walletAddress,d=e.transactions,j=Object(s.useState)(null),u=Object(l.a)(j,2),b=u[0],h=u[1],O=Object(s.useState)(null),x=Object(l.a)(O,2),f=x[0],p=x[1],m=Object(s.useState)(c.PENDING),v=Object(l.a)(m,2),g=v[0],y=v[1],S=Object(s.useState)([]),N=Object(l.a)(S,2),T=N[0],k=N[1],L=Object(s.useState)(0),I=Object(l.a)(L,2),R=I[0],D=I[1],F=function(e){y(e),k(d.filter((function(t){return t.status===e})))};Object(s.useEffect)((function(){F(c.PENDING),t.getNonce().then((function(e){return D(e)}))}),[d]);var P=function(e){return Object(w.rejectTx)(t,e).then((function(e){return i(e,!0)}))},V=function(e){return h("LOADING"),t.getTransactionHash(e).then((function(e){return t.approveTransactionHash(e).then((function(e){return C(t.getProvider(),e.hash)})).then((function(e){return h(e.transactionHash)}))})).catch((function(e){h(null),n(e)}))},_=function(e){t.executeTransaction(e.transaction).then((function(e){return p({status:"LOADING",hash:e.hash}),C(t.getProvider(),e.hash)})).then((function(t){p({status:"COMPLETE",hash:t.transactionHash}),r(e)})).catch((function(e){p(null),n(e)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("section",{className:"panel",children:[Object(a.jsx)("h2",{children:"Transactions"}),Object(a.jsx)(H,{selected:g,handleClick:F}),Object(a.jsx)("h3",{children:"".concat(g.toString()," Transactions:")}),Object(a.jsx)(B,{count:T.length,screen:g}),T.map((function(e){var s=R===e.transaction.data.nonce,r=g===c.PENDING,i=T.filter((function(t){return t.transaction.data.nonce===e.transaction.data.nonce})).length>1;return Object(a.jsx)(M,{safe:t,transactionBundle:e,walletAddress:o,handleError:n,approveTransactionHash:g===c.PENDING?V:void 0,executeTransaction:r&&s?_:void 0,rejectTransaction:r&&s&&!i?P:void 0},e.hash)}))]}),b&&Object(a.jsx)(E,{hash:b,handleClose:function(){return h(null)}}),f&&Object(a.jsx)(A,{status:f,handleClose:function(){return p(null)}})]})},_=function(e){var t=e.safe,n=Object(s.useState)(0),c=Object(l.a)(n,2),r=c[0],i=c[1],o=Object(s.useState)(null),d=Object(l.a)(o,2),j=d[0],u=d[1];Object(s.useEffect)((function(){b(),h()}),[t]);var b=function(){return t.getBalance().then((function(e){return i(e)}))},h=function(){return t.getNonce().then((function(e){return u(e)}))};return Object(a.jsxs)("section",{className:"panel",children:[Object(a.jsx)("h2",{children:"Safe Dashboard"}),Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Safe Address"}),Object(a.jsx)("td",{children:Object(a.jsx)(L,{value:t.getAddress()})})]}),Object(a.jsxs)("tr",{className:"text",children:[Object(a.jsx)("th",{children:"Balance"}),Object(a.jsxs)("td",{children:[(r/1e18).toString(),Object(a.jsx)("button",{onClick:b,className:"icon",children:Object(a.jsx)("img",{src:I,alt:"Refresh"})})]})]}),null!==j&&Object(a.jsxs)("tr",{className:"text",children:[Object(a.jsx)("th",{children:"Nonce"}),Object(a.jsxs)("td",{children:[j.toString(),Object(a.jsx)("button",{onClick:h,className:"icon",children:Object(a.jsx)("img",{src:I,alt:"Refresh"})})]})]})]})})]})},G=function(e){for(var t=e.value,n=e.onChange,c=e.numberOfOwners,s=[],r=1;r<=c;r++)s.push(r);return Object(a.jsx)("select",{value:t,onChange:function(e){return n(parseInt(e.target.value))},children:s.map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))})},J=function(e){for(var t=e.numberOfOwners,n=e.currentThreshold,c=e.handleSubmit,r=Object(s.useState)(n),i=Object(l.a)(r,2),o=i[0],d=i[1],j=[],u=1;u<=t;u++)j.push(u);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Change threshold"}),Object(a.jsx)("p",{children:"Change the number of approvers for a transaction to be executed"}),Object(a.jsx)("label",{children:"New threshold:"}),Object(a.jsx)(G,{numberOfOwners:t,value:o,onChange:function(e){return d(e)}}),Object(a.jsx)("p",{children:Object(a.jsx)("button",{onClick:function(){return c(o)},children:"Change threshold"})})]})},z=n(12),U=function(e){var t=e.handleSubmit,n=e.handleError,c=e.numberOfOwners,r=Object(s.useState)(""),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(s.useState)(c),u=Object(l.a)(j,2),b=u[0],h=u[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Add new owner"}),Object(a.jsx)("label",{children:"Address"}),Object(a.jsx)("input",{type:"text",className:"newOwner",value:o,onChange:function(e){return d(e.target.value)}}),Object(a.jsx)("label",{children:"New Threshold"}),Object(a.jsx)(G,{numberOfOwners:c+1,value:b,onChange:function(e){return h(e)}}),Object(a.jsx)("p",{children:Object(a.jsx)("button",{onClick:function(){Object(z.e)(o.toLowerCase())?t(o.toLowerCase(),b):n(new Error("Value is not an address."))},children:"Update"})})]})},W=function(e){var t=e.numberOfOwners,n=e.handleSubmit,c=e.removeAddress,r=Object(s.useState)(t-1),i=Object(l.a)(r,2),o=i[0],d=i[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Remove owner"}),Object(a.jsx)("p",{children:"Are you sure you want to remove this owner?"}),Object(a.jsx)("span",{className:"readonly",children:c}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{children:"New threshold:"}),Object(a.jsx)(G,{numberOfOwners:t-1,value:o,onChange:function(e){return d(e)}})]}),Object(a.jsx)("p",{children:Object(a.jsx)("button",{onClick:function(){return n(c.toLowerCase(),o)},children:"Remove"})})]})},Y=function(e){var t=e.oldAddress,n=e.handleError,c=e.handleSubmit,r=Object(s.useState)(""),i=Object(l.a)(r,2),o=i[0],d=i[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Swap Owner"}),Object(a.jsx)("p",{children:"Swap address for a new one."}),Object(a.jsx)("label",{children:"Old Address:"}),Object(a.jsx)("span",{className:"readonly",children:t}),Object(a.jsx)("label",{children:"New Owner"}),Object(a.jsx)("input",{type:"text",className:"newAddress",value:o,onChange:function(e){return d(e.target.value)}}),Object(a.jsx)("p",{children:Object(a.jsx)("button",{onClick:function(){return Object(z.e)(o)?c(t,o.toLowerCase()):n(new Error("Address is not valid"))},children:"Swap Address"})})]})},q=n.p+"static/media/delete.8970c03e.svg",X=n.p+"static/media/swap.29d1f400.svg",K=n.p+"static/media/edit.d3af4af9.svg",Q=function(e){var t=e.safe,n=e.addTransaction,c=e.handleError,r=Object(s.useState)([]),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(s.useState)(0),u=Object(l.a)(j,2),b=u[0],h=u[1],O=Object(s.useState)(!1),x=Object(l.a)(O,2),f=x[0],p=x[1],m=Object(s.useState)(!1),v=Object(l.a)(m,2),g=v[0],w=v[1],C=Object(s.useState)(null),y=Object(l.a)(C,2),S=y[0],N=y[1],E=Object(s.useState)(null),A=Object(l.a)(E,2),k=A[0],I=A[1];Object(s.useEffect)((function(){t.getOwners().then((function(e){return d(e)})),t.getThreshold().then((function(e){return h(e)}))}),[t]);var R=function(){p(!1),w(!1),N(null),I(null)};return Object(a.jsxs)("section",{className:"section panel",children:[Object(a.jsx)("h2",{children:"Safe Policy"}),Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Owners"}),Object(a.jsxs)("td",{children:[Object(a.jsx)("ul",{children:o.map((function(e){return Object(a.jsxs)("li",{children:[Object(a.jsx)(L,{value:e}),Object(a.jsx)("button",{className:"icon delete",onClick:function(){return N(e)},children:Object(a.jsx)("img",{src:q,alt:"delete address"})}),Object(a.jsx)("button",{className:"icon",onClick:function(){return I(e)},children:Object(a.jsx)("img",{src:X,alt:"swap address"})})]},e)}))}),Object(a.jsx)("button",{onClick:function(){return p(!0)},children:"+ Add Owner"})]})]}),Object(a.jsxs)("tr",{className:"text",children:[Object(a.jsx)("th",{children:"Threshold"}),Object(a.jsxs)("td",{children:[b,Object(a.jsx)("button",{className:"icon",onClick:function(){return w(!0)},children:Object(a.jsx)("img",{src:K,alt:"edit threshold"})})]})]})]})}),g&&Object(a.jsx)(T,{handleClose:function(){return w(!1)},children:Object(a.jsx)(J,{numberOfOwners:o.length,currentThreshold:b,handleSubmit:function(e){return t.getChangeThresholdTx(e).then((function(e){n(e),R()})).catch(c)}})}),f&&Object(a.jsx)(T,{handleClose:function(){return p(!1)},children:Object(a.jsx)(U,{numberOfOwners:o.length,handleSubmit:function(e,a){return t.getAddOwnerTx(e,a).then((function(e){n(e),R()})).catch(c)},handleError:c})}),S&&Object(a.jsx)(T,{handleClose:function(){return N(null)},children:Object(a.jsx)(W,{removeAddress:S,numberOfOwners:o.length,handleSubmit:function(e,a){return t.getRemoveOwnerTx(e,a).then((function(e){n(e),R()})).catch(c)}})}),k&&Object(a.jsx)(T,{handleClose:function(){return I(null)},children:Object(a.jsx)(Y,{oldAddress:k,handleSubmit:function(e,a){return t.getSwapOwnerTx(e,a).then((function(e){n(e),R()})).catch(c)},handleError:c})})]})},Z=n(81),$=n(20),ee=function(e){var t=e.createTransaction,n=e.handleError,c=Object(s.useState)({amount:1e4,address:"",data:""}),r=Object(l.a)(c,2),i=r[0],o=r[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{children:"Create Transaction"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{children:"Recepient address:"}),Object(a.jsx)("input",{type:"text",className:"to",value:i.address,onChange:function(e){return o(Object(p.a)(Object(p.a)({},i),{},{address:e.target.value}))}})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{children:"Amount:"}),Object(a.jsx)("input",{type:"number",className:"amount",value:i.amount,onChange:function(e){return o(Object(p.a)(Object(p.a)({},i),{},{amount:parseInt(e.target.value)}))}})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{children:"Data: (optional field used for advanced transactions)"}),Object(a.jsx)("textarea",{className:"data",value:i.data,onChange:function(e){return o(Object(p.a)(Object(p.a)({},i),{},{data:e.target.value}))}})]}),Object(a.jsx)("button",{className:"submit",onClick:function(){if(n(null),!Object(z.e)(i.address))return n(new Error("Recipient is not an address."));var e=""===i.data?"0x":i.data;t(i.address.toLowerCase(),i.amount,e)},children:"Create Transaction"})]})},te=function(e){var t=e.token,n=e.createTransaction,c=e.handleError,r=Object(s.useState)({amount:0,address:""}),i=Object(l.a)(r,2),o=i[0],d=i[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h2",{children:["Transfer ERC20 Token: ",t.symbol]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{children:"You have:"}),Object(a.jsx)("span",{className:"readonly",children:t.amount})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{children:"Amount to sent:"}),Object(a.jsx)("input",{type:"number",className:"amount",value:o.amount,onChange:function(e){return d(Object(p.a)(Object(p.a)({},o),{},{amount:parseInt(e.target.value)}))}})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{children:"Recipient address:"}),Object(a.jsx)("input",{type:"string",className:"recipient",value:o.address,onChange:function(e){return d(Object(p.a)(Object(p.a)({},o),{},{address:e.target.value}))}})]}),Object(a.jsx)("p",{children:Object(a.jsx)("button",{className:"submit",onClick:function(){return c(null),Object(z.e)(o.address)?o.amount>t.amount||o.amount<1?c(new Error("Amount should be between 1 and ".concat(t.amount,"."))):n(t,o.amount,o.address.toLowerCase()):c(new Error("Recipient is not an address."))},children:"Create Transaction"})})]})},ne=n(151),ce=n(152),ae=function(e){switch(e){case 31:return ce;default:return ne}},se=function(e){var t=e.safe,n=e.addTransaction,c=e.handleError,r=Object(s.useState)(!1),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(s.useState)(null),u=Object(l.a)(j,2),b=u[0],h=u[1],O=Object(s.useState)("0"),x=Object(l.a)(O,2),m=x[0],v=x[1],g=Object(s.useState)([]),C=Object(l.a)(g,2),y=C[0],S=C[1];Object(s.useEffect)((function(){N(),t.getChainId().then((function(e){return E({symbol:"tRIF",decimals:18,amount:0,contractAddress:ae(e).rifToken})}))}),[t]);var N=function(){return t.getBalance().then((function(e){return v(e.toString())}))},E=function(e){var n=t.getSigner();new Z.b(e.contractAddress,D,n).balanceOf(t.getAddress()).then((function(e){return e.toString()})).then((function(t){var n=Object(p.a)(Object(p.a)({},e),{},{amount:parseInt(t)/Math.pow(10,18)}),c=y.find((function(t){return t.symbol===e.symbol}))?y.map((function(t){return t.symbol===e.symbol?n:t})):[].concat(Object(f.a)(y),[n]);S(c)})).catch((function(e){return console.log("error",e)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"panel",children:[Object(a.jsx)("h2",{children:"Assets"}),Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Asset"}),Object(a.jsx)("th",{children:"Amount"})]})}),Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("p",{children:"rBTC"})}),Object(a.jsx)("td",{children:Object(a.jsxs)("p",{children:[(parseInt(m)/1e18).toString(),Object(a.jsx)("button",{className:"icon",onClick:N,children:Object(a.jsx)("img",{src:I,alt:"refresh balance"})}),Object(a.jsx)("button",{className:"icon",onClick:function(){return d(!0)},children:"transfer"})]})})]}),y.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("p",{children:e.symbol})}),Object(a.jsxs)("td",{children:[e.amount,Object(a.jsx)("button",{className:"icon",onClick:function(){return E(e)},children:Object(a.jsx)("img",{src:I,alt:"refresh balance"})}),Object(a.jsx)("button",{className:"icon",onClick:function(){return h(e)},children:"transfer"})]})]},e.contractAddress)}))]})]})]}),o&&Object(a.jsx)(T,{handleClose:function(){return d(!1)},children:Object(a.jsx)(ee,{createTransaction:function(e,a,s){c(null),t.createTransaction({to:e,value:a.toString(),data:s}).then((function(e){return n(e)})).catch(c).finally((function(){return d(!1)}))},handleError:c})}),b&&Object(a.jsx)(T,{handleClose:function(){return h(null)},children:Object(a.jsx)(te,{token:b,handleError:c,createTransaction:function(e,a,s,r){c(null);var i=new Z.b(e.contractAddress,D,t.getSigner()),o=new w.ERC20TransactionBuilder(t,i),l=$.a.from(a).mul($.a.from(10).pow(e.decimals));o.transfer(s,l).then((function(e){return n(e)})).catch(c).finally((function(){return h(null)}))}})})]})},re=function(e){var t=e.closeModal,n=e.changeScreen;return Object(a.jsxs)(T,{handleClose:t,children:[Object(a.jsx)("h2",{children:"Transaction Created"}),Object(a.jsx)("p",{children:"A transaction has been created and added to the transaction panel. You can sign the transaction there, and when enough signatures are collected, execute it."}),Object(a.jsx)("p",{children:Object(a.jsx)("button",{onClick:n,children:"View Transactions"})})]})},ie=function(e){var t=e.safe,n=e.walletAddress,r=e.handleError,i=e.handleLogout,o=Object(s.useState)("dashboard"),d=Object(l.a)(o,2),j=d[0],u=d[1],b=Object(s.useState)(!1),h=Object(l.a)(b,2),O=h[0],x=h[1],v=Object(s.useState)(0),w=Object(l.a)(v,2),C=w[0],y=w[1];Object(s.useEffect)((function(){t.getNonce().then((function(e){return y(e)}))}),[t]);var S=Object(s.useState)([]),N=Object(l.a)(S,2),T=N[0],E=N[1],A=function(e,n){var a=n?e:new m.SafeTransaction(Object(p.a)(Object(p.a)({},e.data),{},{nonce:C}));t.getTransactionHash(a).then((function(e){var t=[].concat(Object(f.a)(T),[{status:c.PENDING,transaction:a,hash:e,isReject:n||!1}]).sort((function(e,t){return e.transaction.data.nonce>t.transaction.data.nonce?1:-1}));E(t),x(!0),!n&&y(C+1)}))};return Object(a.jsxs)("section",{className:"selectedSafe",children:[Object(a.jsx)(g,{handleLogout:i,changeActive:function(e){return u(e.currentTarget.id)},selected:j}),"dashboard"===j&&Object(a.jsx)(_,{safe:t}),"transactions"===j&&Object(a.jsx)(V,{safe:t,transactions:T,handleError:r,addTransaction:A,updateTransactionStatus:function(e){var t=T.map((function(t){return t.hash===e.hash||t.transaction.data.nonce===e.transaction.data.nonce?Object(p.a)(Object(p.a)({},t),{},{status:t.hash===e.hash?c.EXECUTED:c.REJECTED}):t}));E(t)},walletAddress:n}),"assets"===j&&Object(a.jsx)(se,{safe:t,handleError:r,addTransaction:A}),"policy"===j&&Object(a.jsx)(Q,{safe:t,addTransaction:A,handleError:r}),O&&Object(a.jsx)(re,{closeModal:function(){return x(!1)},changeScreen:function(){x(!1),u("transactions")}})]})},oe=n(153),le=n(54),de=function(e){var t=e.connectAddress,n=e.createSafe,c=e.handleError,r=Object(s.useState)([t?t.toLowerCase():""]),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(s.useState)(1),u=Object(l.a)(j,2),b=u[0],h=u[1],O=function(e){var t=parseInt(e.target.id.replace("address","")),n=o.map((function(n,c){return c===t?e.target.value.toLowerCase():n}));d(n)};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:"Create a new safe"}),Object(a.jsxs)("p",{children:["A safe can have any number of owners associated with it. Your connected address has been added as the first account.",Object(a.jsx)("br",{}),"Click the ",Object(a.jsx)("em",{children:"Add address"})," button to add additional addresses, and the ",Object(a.jsx)("em",{children:"delete button"})," to remove addresses."]}),Object(a.jsx)("ul",{children:o.map((function(e,t){return Object(a.jsxs)("li",{children:[Object(a.jsxs)("label",{children:["Address ",t+1,": "]}),Object(a.jsx)("input",{type:"text",id:"address".concat(t),value:e,onChange:O,className:"address".concat(t)}),Object(a.jsx)("button",{className:"removeAddress".concat(t),onClick:function(){return function(e){var t=o.filter((function(t,n){return n!==e}));d(t)}(t)},children:"delete"})]},t)}))}),Object(a.jsx)("button",{className:"addAddress",onClick:function(){return d([].concat(Object(f.a)(o),[""]))},children:"Add address"}),Object(a.jsxs)("p",{children:["Transactions require the confirmation of at least"," ",Object(a.jsx)("select",{className:"threshold",value:b.toString(),onChange:function(e){return h(parseInt(e.target.value))},children:function(e){for(var t=[],n=0;n<e;n++)t.push(Object(a.jsx)("option",{value:n+1,children:n+1},n));return t}(o.length)}),"signatures."]}),Object(a.jsx)("button",{className:"submit",disabled:0===o.length,onClick:function(){var e=[];if(o.forEach((function(t,n){Object(z.e)(t)||e.push(n+1)})),0!==e.length)return c(new Error("Incorrect Addresses for: ".concat(e.toString()))),!1;n(o,b)},children:"Create Safe"})]})},je=function(e){var t=e.connectToSafe,n=Object(s.useState)(""),c=Object(l.a)(n,2),r=c[0],i=c[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Connect to an existing safe"}),Object(a.jsx)("label",{children:"Safe address"}),Object(a.jsx)("input",{className:"safeAddress",type:"text",value:r,onChange:function(e){return i(e.target.value)}}),Object(a.jsx)("button",{className:"connect",onClick:function(){return t(r)},children:"Connect"})]})},ue=function(e){var t=e.web3Provider,n=e.chainId,c=e.handleSetSafe,r=e.handleError,i=e.address,o=Object(s.useState)(!1),d=Object(l.a)(o,2),j=d[0],u=d[1],b=Object(s.useState)(!1),h=Object(l.a)(b,2),O=h[0],x=h[1];return O?Object(a.jsx)(N,{}):Object(a.jsxs)("section",{className:"connect panel",children:[Object(a.jsxs)("h2",{children:["Create a safe, or connect to an existing one",Object(a.jsx)("button",{onClick:function(){return u(!j)},children:j?"Connect to Safe":"Create Safe"})]}),j?Object(a.jsx)(de,{createSafe:function(e,a){x(!0);var s=ae(n),i=new le.ethers.providers.Web3Provider(t).getSigner();new oe.EthersSafeFactory(i,s.proxyFactoryAddress.toLowerCase(),s.safeSingletonAddress.toLowerCase()).createSafe({owners:e,threshold:a}).then(c).catch(r).finally((function(){return x(!1)}))},handleError:r,connectAddress:i}):Object(a.jsx)(je,{connectToSafe:function(e){x(!0);var n=new le.ethers.providers.Web3Provider(t).getSigner();v.a.create(le.ethers,e.toLowerCase(),n).then((function(e){return c(e)})).catch(r).finally((function(){return x(!1)}))}})]})},be=new j.a({cacheProvider:!1,supportedChains:[31,1337]});var he=function(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(null),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(s.useState)(null),u=Object(l.a)(j,2),b=u[0],O=u[1],f=Object(s.useState)(null),p=Object(l.a)(f,2),m=p[0],v=p[1],g=Object(s.useState)(null),w=Object(l.a)(g,2),C=w[0],y=w[1],S=function(e){return c(e?e.message:null)};return Object(a.jsxs)("div",{className:o?"App":"App signin",children:[o?Object(a.jsx)(x,{chainId:C,walletAddress:m}):Object(a.jsx)(h,{rLogin:be,setRLoginResponse:function(e,t,n){d(e),v(t),y(n),e.provider.on("accountsChanged",(function(e){return v(e[0])}))},handleError:S}),n&&Object(a.jsxs)("section",{className:"error",children:[Object(a.jsx)("p",{children:n}),Object(a.jsx)("button",{onClick:function(){return S(null)},children:"x"})]}),o&&C&&!b&&Object(a.jsx)(ue,{web3Provider:o.provider,chainId:C,handleSetSafe:function(e){O(e),S(null)},handleError:S,address:m}),o&&m&&b&&Object(a.jsx)(ie,{safe:b,walletAddress:m,handleLogout:function(){null===o||void 0===o||o.disconnect(),d(null),O(null),c(null),v(null),y(null)},handleError:S})]})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,277)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(he,{})}),document.getElementById("root")),Oe()},73:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')}},[[274,1,2]]]);
//# sourceMappingURL=main.88326b15.chunk.js.map